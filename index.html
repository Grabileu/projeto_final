<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GUF Sistemas — Projeto</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <aside class="sidebar" aria-label="Menu principal">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="18" height="18" rx="4" fill="#3B82F6"/>
            <path d="M7 12h10M7 16h6" stroke="#fff" stroke-width="1.6" stroke-linecap="round"/>
          </svg>
        </div>
        <strong class="app-name">GUF Sistemas</strong>
      </div>

      <nav class="nav">
        <ul>
          <li class="nav-item active" data-target="dashboard">
            <button class="nav-btn" aria-expanded="false">
              <span class="nav-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="3" y="3" width="7" height="7" rx="1" fill="#1F2937"/>
                  <rect x="14" y="3" width="7" height="7" rx="1" fill="#1F2937"/>
                  <rect x="3" y="14" width="7" height="7" rx="1" fill="#1F2937"/>
                  <rect x="14" y="14" width="7" height="7" rx="1" fill="#1F2937"/>
                </svg>
              </span>
              <span class="nav-label">Dashboard</span>
            </button>
          </li>
          <li class="nav-item has-sub" data-target="funcionarios">
            <button class="nav-btn" aria-expanded="false">
              <span class="nav-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" fill="#1F2937"/>
                  <path d="M4 20a8 8 0 0116 0" stroke="#1F2937" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
              <span class="nav-label">Funcionários</span>
              <span class="chev" aria-hidden="true">▾</span>
            </button>

            <ul class="subnav" aria-label="Submenu funcionários">
              <li class="subnav-item" data-target="funcionario">
                <button class="subnav-btn">Funcionário</button>
              </li>
              <li class="subnav-item" data-target="faltas">
                <button class="subnav-btn">Faltas</button>
              </li>
              <li class="subnav-item" data-target="quebras">
                <button class="subnav-btn">Quebras de caixa</button>
              </li>
            </ul>
          </li>
          <li class="nav-item has-sub" data-target="ceasa">
            <button class="nav-btn" aria-expanded="false">
              <span class="nav-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3 10h18M5 14h14M4 18h16" stroke="#1F2937" stroke-width="1.4" stroke-linecap="round"/>
                </svg>
              </span>
              <span class="nav-label">Ceasa</span>
              <span class="chev" aria-hidden="true">▾</span>
            </button>

            <ul class="subnav" aria-label="Submenu ceasa">
              <li class="subnav-item" data-target="ceasa-compras">
                <button class="subnav-btn">Compras</button>
              </li>
              <li class="subnav-item" data-target="ceasa-fornecedores">
                <button class="subnav-btn">Fornecedores</button>
              </li>
            </ul>
          </li>
          <li class="nav-item has-sub" data-target="relatorios">
            <button class="nav-btn" aria-expanded="false">
              <span class="nav-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 3h6v2H9V3zm-4 4h14v2H5V7zm0 4h14v2H5v-2zm0 4h10v2H5v-2z" fill="#1F2937"/>
                </svg>
              </span>
              <span class="nav-label">Relatórios</span>
              <span class="chev" aria-hidden="true">▾</span>
            </button>

            <ul class="subnav" aria-label="Submenu relatórios">
              <li class="subnav-item" data-target="relatorios-quebras">
                <button class="subnav-btn">Quebras de caixa</button>
              </li>
              <li class="subnav-item" data-target="relatorios-faltas-atestados">
                <button class="subnav-btn">Faltas e Atestados</button>
              </li>
              <li class="subnav-item" data-target="relatorios-ceasa">
                <button class="subnav-btn">Ceasa</button>
              </li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="sidebar-footer">
        <small class="version">v1.0</small>
      </div>
    </aside>

    <div class="main">
      <header class="topbar">
        <button class="menu-toggle" aria-label="Alternar menu" title="Alternar menu">☰</button>
        <h1 class="page-title">Funcionários</h1>
      </header>

      <main class="content" id="content">
        <section class="panel">
          <div class="panel-header">
            <h2>Visão geral</h2>
            <div class="actions">
              <button class="btn primary" id="btnAction">Criar funcionário</button>
            </div>
          </div>

          <div class="panel-body">
            <p class="empty">Carregando...</p>
          </div>
        </section>
      </main>
    </div>
  </div>

    <script src="funcionarios.js"></script>
  <script src="faltas.js"></script>
  <script src="quebras.js"></script>
  <script src="ceasa.js"></script>
  <script src="fornecedores.js"></script>
  <script src="relatorios.js"></script>
  <script src="dashboard.js"></script>
  <script>
    (function () {
      const toggle = document.querySelector('.menu-toggle');
      toggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('sidebar-collapsed');
      });

      let currentSection = 'dashboard';

      const navItems = document.querySelectorAll('.nav-item');

      navItems.forEach(item => {
        const btn = item.querySelector('.nav-btn');

        btn.addEventListener('click', (e) => {
          const sub = item.querySelector('.subnav');
          if (sub) {
            const isOpen = item.classList.toggle('open');
            btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
            return;
          }

          document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');

          const label = item.querySelector('.nav-label') ? item.querySelector('.nav-label').textContent.trim() : '';
          if (label) document.querySelector('.page-title').textContent = label;

          const target = item.getAttribute('data-target');
          if (target) {
            currentSection = target;
            atualizarSecao(target);
          }
        });

        const subBtns = item.querySelectorAll('.subnav-btn');
        subBtns.forEach(sb => sb.addEventListener('click', (ev) => {
          ev.stopPropagation();
          document.querySelectorAll('.nav-item, .subnav-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');
          sb.parentElement.classList.add('active');

          const label = sb.textContent.trim();
          document.querySelector('.page-title').textContent = label;

          const target = sb.parentElement.getAttribute('data-target');
          currentSection = target;
          atualizarSecao(target);
        }));
      });

      const btnAction = document.getElementById('btnAction');
      btnAction.addEventListener('click', () => {
        if (currentSection === 'funcionario') {
          FuncionariosUI.showCreatePage();
        } else if (currentSection === 'faltas') {
          FaltasUI.showAddFaltaPage();
        } else if (currentSection === 'quebras') {
          quebrasUI.showAddQuebraPage();
        } else if (currentSection === 'ceasa-compras') {
          ceasaUI.showAddCompraPage();
        } else if (currentSection === 'ceasa-fornecedores') {
          fornecedoresUI.showAddFornecedorPage();
        } else if (currentSection.startsWith('relatorios-')) {
          // Relatórios não têm botão de ação
          btnAction.style.display = 'none';
        }
      });

      const atualizarSecao = (secao) => {
        if (secao === 'dashboard') {
          btnAction.style.display = 'none';
          dashboardUI.renderDashboard();
        } else if (secao === 'funcionario') {
          btnAction.textContent = 'Criar funcionário';
          btnAction.style.display = 'block';
          FuncionariosUI.renderLista();
        } else if (secao === 'faltas') {
          btnAction.textContent = 'Adicionar falta';
          btnAction.style.display = 'block';
          FaltasUI.renderLista();
        } else if (secao === 'quebras') {
          btnAction.textContent = 'Adicionar vale';
          btnAction.style.display = 'block';
          quebrasUI.renderLista();
        } else if (secao === 'ceasa-compras') {
          btnAction.textContent = 'Adicionar compra';
          btnAction.style.display = 'block';
          ceasaUI.renderLista();
        } else if (secao === 'ceasa-fornecedores') {
          btnAction.textContent = 'Adicionar fornecedor';
          btnAction.style.display = 'block';
          fornecedoresUI.renderLista();
        } else if (secao === 'relatorios-quebras') {
          btnAction.style.display = 'none';
          relatóriosUI.renderRelatórioQuebras();
        } else if (secao === 'relatorios-faltas-atestados') {
          btnAction.style.display = 'none';
          relatóriosUI.renderRelatórioFaltasAtestados();
        } else if (secao === 'relatorios-ceasa') {
          btnAction.style.display = 'none';
          relatóriosUI.renderRelatórioCeasa();
        } else if (secao === 'relatorios-funcionarios') {
          btnAction.style.display = 'none';
          relatóriosUI.renderRelatórioFuncionários();
        } else if (secao === 'relatorios-ceasa') {
          btnAction.style.display = 'none';
          relatóriosUI.renderRelatórioCeasa();
        }
      };

      // Inicializar com o dashboard
      atualizarSecao('dashboard');
    })();
  </script>
</body>
</html>